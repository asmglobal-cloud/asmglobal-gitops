# ==============================
# TRAEFIK HELM VALUES
# ==============================

# Enable CRDs (we already installed them but Helm will verify)
experimental:
  kubernetesCRD: true

# Dashboard
ports:
  web:
    port: 80
    expose: true
    exposedPort: 80

  websecure:
    port: 443
    expose: true
    exposedPort: 443

  traefik:
    port: 8080
    expose: true
    exposedPort: 8080

ingressRoute:
  dashboard:
    enabled: false

service:
  type: LoadBalancer
  annotations: {}
# ============================
# ENTRYPOINT MIDDLEWARE
# ============================
globalArguments:
  - "--api.dashboard=true"
  - "--entrypoints.web.http.redirections.entryPoint.to=websecure"
  - "--entrypoints.web.http.redirections.entryPoint.scheme=https"
  - "--entrypoints.web.http.redirections.entryPoint.permanent=true"

# Enable access logs
accessLogs:
  enabled: true

# Enable Traefik logs
logs:
  general:
    level: INFO
  access:
    enabled: true

# Security for dashboard: only allow internal routing (we will expose via IngressRoute)
additionalArguments:
  - "--api.insecure=false"
  - "--serversTransport.insecureSkipVerify=true"
